(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{143:function(e,t,a){},198:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAABRUlEQVR4nO3cQQ7CMAxEUYO4FqcHrgVsoAtkg91JIST/SSwiKlNLZZR4UTMAAAAAm7mY2WnidWifucjMrmZ2m3gN/Ll0Jgxi8wwc3Wz9YnhkYKBVBl4e32c+0Y31UiPT72KXuSihGrje7/ZSo+SgFnjx6YYyDfZSIyX7FyYDA+wDfV/v9xnMynW91CjJPoEIkIE+MlBEBgo1SlrvA1vcVC81Ulpl4Lnwm1GdXmqYFTIw+wR+yoRjss47vdQwmy/zMTz2gQHmgev6XTAPFDEPFHEW9nEWFnEWFmqUMA8UkYE+MlBEBgo1SpgHipgH+pgHimbLfAyPfWCAeeC6fhfMA0XMA0WchX2chUWchYUaJcwDRWSgjwwUkYFCjRLmgSLmgT7mgaLZMh/DYx8YYB/om61fDO/X76769TrEu7NyawAAAAAt3QF47a2Wk/OIFQAAAABJRU5ErkJggg=="},199:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAABHElEQVR4nO3YQWrCQBiG4Y/eQq+kx7H2APZadlN6Ie2i3dQuZqBQYmv5Q2zweWAgGoPD4JjwJgAAAHOwTrJP8prk2I9XV53RjDwmOZ0ZuyvOaxbWaQv1lmSTZNHHfX/vFL/EHz2lLdJm4Ny2n9tPOqOZOaQt0qK/fkny3I+X/dzhzLXntv1/Hhe5u/SDAz7+8kW07XlK+8/77iG28K9W+bqJbNO27TJt8d7jJnKRXTzGlK3StuoxHqQBAG6JoFogqBYIqkWCapGgOkBQnZCgWiSojkBQHYGgCgDMlB5YoAcW6IFFemCRHjhAD5yQHlikB45ADxyBHggAcJsE1QJBtUBQLRJUiwTVAYLqhATVIkF1BILqCARVAACAq/oEDOV5vGcuW0oAAAAASUVORK5CYII="},210:function(e,t,a){e.exports=a(399)},215:function(e,t,a){},382:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(25),r=a.n(s),o=(a(215),a(143),a(33)),c=a(16),l=a(17),m=a(18),u=a(19),h=a(20),p=a(194),d=a.n(p),g=(a(216),a(178)),f=a.n(g),v=a(412),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).options=[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5+",value:"5+"}],a.setDate=function(e){a.setState({date:new Date(e)})},a.submit=function(e){e.preventDefault();var t;t="?location=".concat(a.state.location,"&date=").concat(a.state.date,"&guests=").concat(a.state.guests),window.location.href=a.props.method+t},a.onChange=function(e,t){console.log(e),a.setState(Object(o.a)({},t.name,t.value))},a.onLocationChange=function(e){a.setState({location:e.target.value})},a.state={location:a.props.location?a.props.location.name:"Ottawa, ON",date:a.props.date?new Date(a.props.date):new Date,guests:a.props.guests||"2"},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(v.a,{className:"ui form container",onSubmit:this.submit,autocomplete:"off",style:this.props.style},i.a.createElement("h1",{className:"ui dividing header"},"Find your next tasting."),!this.props.location&&i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Where"),i.a.createElement(f.a,{type:"text",ID:"location",name:"location",onPlaceSelected:function(t){e.setState({location:t.formatted_address})},value:this.state.location,onChange:this.onLocationChange,types:["(regions)"]})),this.props.location&&i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Where"),i.a.createElement(v.a.Input,{type:"text",ID:"location",name:"location",disabled:!0,value:this.props.location.name})),i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"When"),i.a.createElement("input",{hidden:!0,value:this.state.date,name:"date",required:!0}),i.a.createElement(d.a,{selected:this.state.date,onChange:this.setDate})),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"field"},i.a.createElement("label",null,"Guests"),i.a.createElement(v.a.Dropdown,{name:"guests",placeholder:"Guests",fluid:!0,selection:!0,options:this.options,onChange:this.onChange,value:this.state.guests}))),i.a.createElement("div",{ref:function(t){return e.instance=t}}),i.a.createElement("button",{className:"ui purple button right floated"},"Search"))}}]),t}(i.a.Component),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={result:"Loading..."},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){fetch("/handshake").then((function(e){})).catch((function(e){throw e}))}},{key:"render",value:function(){return i.a.createElement("div",null)}}]),t}(i.a.Component);var y=function(e){return i.a.createElement("div",{className:"jumbo cover background"},i.a.createElement(b,null),i.a.createElement("div",{id:"EntryField",className:"hover ui box"},i.a.createElement(E,{method:"/Search",history:e.history})))},w=function(e){var t={image:{background:"url('"+e.url+"')",height:"100px"}};return i.a.createElement("div",{className:"ui inverted vertical masthead left aligned segment",style:t.image},i.a.createElement("div",{className:"ui container"},i.a.createElement("div",{onClick:e.history.goBack},i.a.createElement("i",{className:"inverted white huge angle left icon",style:{cursor:"pointer"}}))))},A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={wine:{}},fetch("http://localhost:3000/wine/"+e.wine_id).then((function(e){return e.json()})).then((function(e){a.setState({wine:e})})),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"wine"},i.a.createElement("div",{className:"wine-img",style:{background:"url(".concat("http://localhost:3000/winery/photo/"+this.state.wine.thumbnail,")")}}),i.a.createElement("h3",{className:"wine-title"},this.state.wine.name),i.a.createElement("span",{className:"wine-type"},this.state.wine.category))}}]),t}(i.a.Component),O=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"winery-grid"},this.props.wines.map((function(e){return i.a.createElement(A,{wine_id:e})})))}}]),t}(i.a.Component),j=a(196),k=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{class:"winery-photo-viewer"},i.a.createElement(j.a,null,this.props.pictures.map((function(e){return i.a.createElement("img",{src:"http://localhost:3000/winery/photo/"+e})})),this.props.pictures.map((function(e){return i.a.createElement("img",{src:"http://localhost:3000/winery/photo/"+e})})),this.props.pictures.map((function(e){return i.a.createElement("img",{src:"http://localhost:3000/winery/photo/"+e})}))))}}]),t}(i.a.Component),C=(a(382),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,winery:{},wines:[],date:a.props.location.state.date,guests:a.props.location.state.guests},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/winery/"+this.props.match.params.id).then((function(e){return e.json()})).then((function(t){e.setState({loading:!1,winery:t[0],wines:t[0].wines})}))}},{key:"render",value:function(){return this.state.loading?i.a.createElement("div",null,"Loading..."):i.a.createElement("div",null,i.a.createElement(w,Object.assign({url:"http://localhost:3000/winery/photo/"+this.state.winery.photos[0]},this.props)),i.a.createElement("br",null),i.a.createElement("div",{className:"ui container winery-description"},i.a.createElement("div",{className:"left-info"},i.a.createElement(k,{pictures:this.state.winery.photos}),i.a.createElement("h1",null,this.state.winery.name),i.a.createElement("h2",null,this.state.winery.address," ",this.state.winery.region),i.a.createElement("br",null),this.state.winery.address1,i.a.createElement("br",null),this.state.winery.address2,i.a.createElement("br",null),this.state.winery.phone,i.a.createElement("br",null),this.state.winery.email,i.a.createElement("br",null),i.a.createElement(O,{wines:this.state.wines})),i.a.createElement("div",{className:"ui section right-booking"},i.a.createElement(E,{location:{id:this.state.winery._id,name:this.state.winery.name},date:this.state.date,guests:this.state.guests,method:"/Booking/".concat(this.state.winery._id)}))))}}]),t}(i.a.Component)),N=a(42);var S=function(){return i.a.createElement("div",{className:"ui menu",style:{margin:"0px"}},i.a.createElement("div",{className:"header item"},i.a.createElement(N.b,{to:"/"},"Home")),i.a.createElement("div",{className:"item"},i.a.createElement(N.b,{to:"/Winery"},"Winery")))},I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadingTask=function(){a.setState({isLoading:!1})},a.selectWinery=function(){a.props.history.push("/Winery/"+a.props.item._id,{date:a.props.date,guests:a.props.guests})},a.moveTo=function(e){var t={lat:e.location.coordinates[1],lng:e.location.coordinates[0],_id:e._id};a.props.onHover(t)},a.onListItemClicked=a.props.onListItemClicked,a.state={isLoading:!0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ui item winery-list-item",style:this.props.grid?{marginTop:"10px",gridTemplateColumns:"auto",height:"400px"}:{},onClick:this.selectWinery},i.a.createElement("div",{className:this.props.grid?"ui image":"list-image",style:{width:"100%",height:"100%",background:"url(".concat("http://localhost:3000/winery/photo/"+this.props.item.photos[0],")"),backgroundSize:"cover"}}),!this.props.grid&&i.a.createElement("div",{className:"content"},i.a.createElement("p",{className:"header"},this.props.item.name),i.a.createElement("div",{className:"meta"},i.a.createElement("span",null,this.props.item.address)),i.a.createElement("div",{className:"description"},i.a.createElement("p",null,this.props.item.phone)),i.a.createElement("div",{className:"extra"},"Additional Details")))}}]),t}(i.a.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ui items",style:this.props.grid?{display:"grid",gridTemplateColumns:"33% 33% 33%"}:{}},this.props.wineries.map((function(t,a){return i.a.createElement(I,{grid:e.props.grid,key:t._id,selectedItem:e.state.selectedItem,item:t,history:e.props.history,date:e.props.date,guests:e.props.guests,onListItemClicked:e.onListItemClicked})})))}}]),t}(i.a.Component),W=a(101),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeZoom=function(e,t){},a.showWindow=!0,a.onMarkerClick=a.props.onMarkerClick,a.state={wineries:a.props.wineries,selectedItem:a.props.selectedItem,center:a.props.center,zoom:14},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=new this.props.google.maps.LatLngBounds;t.extend(this.props.center);for(var a=0;a<this.props.wineries.length;a++)try{t.extend({lat:this.props.wineries[a].location.coordinates[1],lng:this.props.wineries[a].location.coordinates[0]})}catch(n){}return i.a.createElement(W.Map,{google:this.props.google,zoom:14,onIdle:this.props.onBoundsChanged,onZoomChanged:this.changeZoom,initialCenter:this.props.center},this.props.wineries.map((function(t){return i.a.createElement(W.Marker,{key:t._id,onClick:e.props.onMarkerClick,name:t.name,position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]}})})))}}]),t}(i.a.Component),L=Object(W.GoogleApiWrapper)({apiKey:"AIzaSyC-4UavBoKcYVsfW1bKp5aCL9BvukthmVI"})(x),D=a(102),M=a.n(D),Y=(a(397),a(198)),Q=a.n(Y),U=a(199),J=a.n(U),R=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ui menu",style:{margin:"0px"}},i.a.createElement("div",{className:"header item"},i.a.createElement(N.b,{to:"/"},"Home")),i.a.createElement("div",{className:"right menu desktop-hidden"},i.a.createElement("div",{className:"item",onClick:this.props.toggleMap},this.props.map&&i.a.createElement("span",null,"List"),!this.props.map&&i.a.createElement("span",null,"Map"))))}}]),t}(i.a.Component),T=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).geoLocate=function(e){M.a.setApiKey("AIzaSyC-4UavBoKcYVsfW1bKp5aCL9BvukthmVI"),M.a.enableDebug(),M.a.fromAddress(decodeURIComponent(e.replace(/[+]/g,"%20"))).then((function(e){a.setState({center:e.results[0].geometry.location}),a.doSearch(a.state)})).catch((function(e){console.error(e)}))},a.onMarkerClick=function(e){a.setState({selectedItem:e})},a.doSearch=function(e){fetch("http://localhost:3000/winery/search",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){"success"===e.status?a.setState({search_results:e.data,search:!0}):a.setState({search:!0})})).catch((function(e){console.error(e)}))},a.wineryListItemHover=function(e){a.setState({selectedItem:e._id})},a.boundsChanged=function(e,t){a.setState({center:{lat:t.center.lat(),lng:t.center.lng()},bounds:t.getBounds()}),a.doSearch(a.state)},a.toggleGrid=function(){a.setState({grid:!a.state.grid})},a.toggleMap=function(){a.setState({map:!a.state.map})};var n=a.props.location.search.substring(1);return a.state=JSON.parse('{"'+decodeURI(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),a.state.geo=!1,a.state.search=!1,a.state.grid=!1,a.state.map=!1,a.state.search_results=[],a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.geoLocate(this.state.location),this.setState({selectedItem:{}}),setTimeout((function(){e.state.search||(alert("Timeout"),e.props.history.push("/"))}),5e3)}},{key:"render",value:function(){return this.state.search||this.state.geo?i.a.createElement("div",{className:"winery-search"},i.a.createElement(R,{toggleMap:this.toggleMap,map:this.state.map}),i.a.createElement("div",{className:"winery-search-inner"},i.a.createElement("div",{className:this.state.map?"winery-search-left mobile-list":"winery-search-left mobile-map"},i.a.createElement("button",{onClick:this.toggleGrid,className:"ui button float-right mobile-hidden"},i.a.createElement("img",{alt:"Winery",src:this.state.grid?Q.a:J.a,style:{width:"25px",height:"25px"}})),i.a.createElement(B,{wineries:this.state.search_results,grid:this.state.grid,date:this.state.date,guests:this.state.guests,history:this.props.history})),i.a.createElement("div",{className:this.state.map?"winery-search-right mobile-list":"winery-search-right mobile-map"},i.a.createElement(L,{onBoundsChanged:this.boundsChanged,selectedItem:this.state.selectedItem,wineries:this.state.search_results,center:this.state.center,onMarkerClicked:this.onMarkerClick})))):i.a.createElement("div",{className:"winery-search-div"},i.a.createElement(S,null),i.a.createElement("div",{className:"middle-loader"},i.a.createElement("div",{className:"inner-loader"},i.a.createElement("div",{className:"ui active centered inline loader"}),i.a.createElement("h3",null,"Looking for wineries in"),i.a.createElement("h3",null,decodeURIComponent(this.state.location.replace(/[+]/g,"%20"))),i.a.createElement("h3",null,"on ",new Date(decodeURIComponent(this.state.date.replace(/[+]/g,"%20"))).toDateString()),i.a.createElement("h3",null,"for  ",this.state.guests,"  ",this.state.guests<2?"person":"people"))))}}]),t}(i.a.Component),H=function(e){function t(e){var a;Object(c.a)(this,t);var n=(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).props.location.search.substring(1);return a.state=JSON.parse('{"'+decodeURI(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:""},Object.keys(this.state).map((function(t,a){return i.a.createElement("div",null,t," : ",e.state[t])})))}}]),t}(i.a.Component),F=(a(398),a(45));var K=function(){return i.a.createElement(N.a,null,i.a.createElement("div",null,i.a.createElement(F.a,{path:"/",exact:!0,component:y}),i.a.createElement(F.a,{path:"/Search",exact:!0,component:T}),i.a.createElement(F.a,{path:"/Booking/:id",exact:!0,component:H}),i.a.createElement(F.a,{path:"/Winery/:id",exact:!0,component:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.d10d36de.chunk.js.map